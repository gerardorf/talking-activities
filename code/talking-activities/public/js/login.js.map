{"version":3,"sources":["authenticationService.js","controller.js","labelsFactory.js","labelsService.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.js","sourcesContent":["talking.service('authenticationService', ['$http', function($http) {\n\n    var authenticate = function (login) {\n        return $http({\n            method: 'post',\n            url: '/system/authentication',\n            data: login\n        });\n    };\n    \n    return{\n        authenticate: authenticate\n    }\n}]);","talking.controller('loginController', ['$scope', '$location', 'labelsFactory', 'labelsService', 'authenticationService', function ($scope, $location, labelsFactory, labelsService, authenticationService) {\n    $scope.login = {\n        email: '',\n        password: ''\n    };\n    $scope.labels = labelsFactory.page();\n    $scope.error = false;\n    $scope.welcomeMessage = false;\n\n\n    $scope.authenticate = function () {\n        authenticationService.authenticate($scope.login)\n            .then(goToStartPage)\n            .catch(showErrorMessage);\n    };\n\n    var goToStartPage = function () {\n        $location.path('/welcome');\n    };\n    \n    var showErrorMessage = function (response) {\n        $scope.error = labelsFactory.error(response.data.error);\n    };\n}]);\n","talking.factory('labelsFactory', ['labelsService', function(labelsService) {\n    \n    var pageLabels = function() {\n        return labelsService.loadLabels(['login.mail.label',\n            'login.password.label',\n            'login.submit.label',\n            'login.title.label'\n        ]);\n    };\n\n    var errorLabel = function(errorKey) {\n        // return labelsService.loadLabel('login.password.error');\n        return labelsService.loadLabel(errorKey);\n    };\n\n    return {\n        page: pageLabels,\n        error: errorLabel\n    };\n}]);\n","talking.service('labelsService', ['$http', function($http) {\n   \n    var loadLabel = function (key) {\n        return loadLabels([key])\n    };\n\n    var loadLabels = function(keys) {\n        var labels = {};\n        request(keys)\n            .success(function (response) {\n                for (var i = 0; i < response.length; i++) {\n                    labels[response[i].key] = response[i].value;\n                }\n            });\n        return labels;\n    };\n\n    var request = function (keys) {\n        return $http({\n            method: 'post',\n            url: '/system/labels',\n            data: {keys: keys}\n        });\n    };\n    \n    return {\n        loadLabel: loadLabel,\n        loadLabels: loadLabels\n    }\n}]);\n"],"sourceRoot":"/source/"}