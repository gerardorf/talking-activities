{"version":3,"sources":["authenticationService.js","controller.js","labelsFactory.js","labelsService.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.js","sourcesContent":["talking.service('authenticationService', ['$http', function($http) {\n    const ENDPOINT = '/system/authentication';\n\n    var authenticate = function (credentials) {\n        return $http.post(ENDPOINT, credentials);\n    };\n    \n    return{\n        authenticate: authenticate\n    }\n}]);","talking.controller('loginController', ['$scope', '$location', 'labelsFactory', 'authenticationService', function ($scope, $location, labelsFactory, authenticationService) {\n    $scope.login = {\n        email: '',\n        password: ''\n    };\n    $scope.labels = labelsFactory.page();\n    $scope.error = false;\n\n    $scope.authenticate = function () {\n        authenticationService.authenticate($scope.login)\n            .then(goToStartPage)\n            .catch(showErrorMessage);\n    };\n\n    var goToStartPage = function () {\n        $location.path('/welcome');\n    };\n    \n    var showErrorMessage = function (response) {\n        $scope.error = labelsFactory.error(response.data.error);\n    };\n}]);\n","talking.factory('labelsFactory', ['labelsService', function(labelsService) {\n    \n    var pageLabels = function() {\n        return labelsService.loadLabels(['login.mail.label',\n            'login.password.label',\n            'login.submit.label',\n            'login.title.label'\n        ]);\n    };\n\n    var errorLabel = function(errorKey) {\n        return labelsService.loadLabel(errorKey);\n    };\n\n    return {\n        page: pageLabels,\n        error: errorLabel\n    };\n}]);\n","talking.service('labelsService', ['$http', function($http) {\n    const ENDPOINT = '/system/labels';\n    \n    var loadLabel = function (key) {\n        return loadLabels([key])\n    };\n\n    var loadLabels = function(keys) {\n        var labels = {};\n        request(keys)\n            .then(function (response) {\n                for (var i = 0; i < response.data.length; i++) {\n                    labels[response.data[i].key] = response.data[i].value;\n                }\n            });\n        return labels;\n    };\n\n    var request = function (keys) {\n        return $http.post(ENDPOINT, {keys: keys});\n    };\n    \n    return {\n        loadLabel: loadLabel,\n        loadLabels: loadLabels\n    }\n}]);\n"],"sourceRoot":"/source/"}